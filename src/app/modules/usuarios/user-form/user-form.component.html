@if (initial) {
  <h3 class="text-base font-semibold mb-2">Editar usuario</h3>
} @else {
  <h3 class="text-base font-semibold mb-2">Nuevo usuario</h3>
}

<form [formGroup]="form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
  <div>
    <label class="block text-sm font-medium">Usuario</label>
    <input formControlName="usuario" type="text" class="w-full border rounded p-2"/>
    @if (form.get('usuario')?.touched && form.get('usuario')?.invalid) {
      <div class="text-xs text-red-600 mt-1">Ingrese un usuario válido (3–100).</div>
    }
  </div>

  <div>
    <label class="block text-sm font-medium">Nombre</label>
    <input formControlName="nombre" type="text" class="w-full border rounded p-2"/>
  </div>

  <div>
    <label class="block text-sm font-medium">Correo</label>
    <input formControlName="correo" type="email" class="w-full border rounded p-2"/>
    @if (form.get('correo')?.touched && form.get('correo')?.invalid) {
      <div class="text-xs text-red-600 mt-1">Correo inválido.</div>
    }
  </div>

  <div>
    <label class="block text-sm font-medium">Rol</label>
    <select formControlName="rol" class="w-full border rounded p-2">
      @for (r of roles; track r) {
        <option [value]="r">{{ r | titlecase }}</option>
      }
    </select>
  </div>

  <div>
    <label class="block text-sm font-medium">Estado</label>
    <select formControlName="estado" class="w-full border rounded p-2">
      @for (e of estados; track e) {
        <option [value]="e">{{ e }}</option>
      }
    </select>
  </div>

  <div class="md:col-span-2">
    <label class="block text-sm font-medium">
      {{ initial?.id ? 'Cambiar contraseña (opcional)' : 'Contraseña' }}
    </label>
    <input formControlName="password" type="password" class="w-full border rounded p-2"/>
    @if (form.get('password')?.touched && form.get('password')?.invalid) {
      <div class="text-xs text-red-600 mt-1">Mínimo 8 caracteres.</div>
    }
  </div>

  <div class="md:col-span-2 flex justify-end gap-2">
    <button type="button" class="px-4 py-2 bg-gray-400 text-white rounded" (click)="onCancel()">Cancelar</button>
    <button type="button" class="px-4 py-2 bg-blue-600 text-white rounded" (click)="onSubmit()">Guardar</button>
  </div>
</form>
