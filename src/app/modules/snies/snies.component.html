<main class="w-full min-h-screen bg-gray-50 -mt-10">
  <article
    class="bg-white rounded-2xl shadow-lg p-6 md:p-10 border border-transparent hover:border-gray-100 transition-all"
  >
    <div class="mb-6">
      <h1 class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-2">SNIEs</h1>
      <p class="text-sm md:text-base text-gray-600 max-w-3xl">
        Información del SNIES disponible para descarga. Seleccione el semestre y haga clic en
        <span class="font-medium">Descargar</span> para obtener el archivo correspondiente.
      </p>
    </div>

    <section class="space-y-2">
      @for (row of rows; track row.id) {
        <div
          class="grid grid-cols-1 md:grid-cols-12 items-center gap-4 py-4 md:py-6 border-b last:border-b-0"
        >
          <div class="md:col-span-7">
            <p class="text-gray-900 text-base md:text-lg">{{ row.label }}</p>
            <p class="text-xs text-gray-400 mt-1 hidden md:block">Informe por semestre</p>
          </div>

          <div class="md:col-span-3 flex md:justify-end">
            <label class="sr-only" [for]="row.id">Seleccionar semestre</label>
            <div class="w-full md:w-44">
              <select
                [id]="row.id"
                [(ngModel)]="row.period"
                class="w-full px-4 py-2 rounded-md bg-gray-100 border border-gray-200 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-blue-200"
              >
                <option value="">Semestre</option>
                @for (p of periods; track p) {
                  <option [value]="p">{{ p }}</option>
                }
              </select>
            </div>
          </div>

          <div class="md:col-span-2 flex justify-start md:justify-end">
            <button
              (click)="onDownload(row)"
              [disabled]="!row.period || row.loading"
              class="inline-flex items-center px-4 md:px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed active:translate-y-0.5 text-white text-sm font-medium shadow-md focus:outline-none focus:ring-2 focus:ring-blue-300"
            >
              @if (row.loading) {
                <svg class="animate-spin -ml-1 mr-2 h-4 w-4" viewBox="0 0 24 24">
                  <circle
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    stroke-width="4"
                    fill="none"
                    opacity=".25"
                  />
                  <path
                    d="M4 12a8 8 0 0 1 8-8"
                    stroke="currentColor"
                    stroke-width="4"
                    fill="none"
                  />
                </svg>
                Descargando…
              } @else {
                Descargar
              }
            </button>
          </div>
        </div>
      }
    </section>
  </article>
</main>
